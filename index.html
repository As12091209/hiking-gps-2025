<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§å°éœ¸å¹³å®‰å›å ±</title>
    <style>
        body {
            background-color: #121212;
            color: #ffffff;
            font-family: system-ui, -apple-system, sans-serif;
            padding: 20px;
            text-align: center;
        }
        h1 { font-size: 1.5rem; color: #4CAF50; }
        .card {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid #333;
        }
        .gps-info { font-family: monospace; color: #aaa; margin-bottom: 10px; font-size: 0.9rem;}
        
        button {
            width: 100%;
            padding: 15px;
            margin: 5px 0;
            font-size: 1.1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
        }
        .btn-update { background-color: #2196F3; color: white; margin-bottom: 20px;}
        .btn-status { background-color: #333; color: #eee; border: 1px solid #555;}
        .btn-status:active { background-color: #4CAF50; color: black; }
        
        textarea {
            width: 100%;
            height: 80px;
            background: #2d2d2d;
            color: #fff;
            border: 1px solid #555;
            border-radius: 8px;
            padding: 10px;
            font-size: 1rem;
            margin-top: 10px;
            box-sizing: border-box;
        }
        .copy-hint { color: #F44336; font-size: 0.9rem; margin-top: 5px; display: none;}
    </style>
</head>
<body>
    <br>
    <h1>â›°ï¸ å¤§å°éœ¸å›å ±å™¨</h1>
    <br>
    <div class="card">
        <button class="btn-update" onclick="getGPS()">ğŸ“ æ›´æ–° GPS ä½ç½®</button>
        <div class="gps-info" id="gpsDisplay">ç­‰å¾…å®šä½ä¸­...</div>
    </div>
    <br>
    <div class="card">
        <p>é¸æ“‡ç‹€æ…‹ï¼š</p>
        <button class="btn-status" onclick="generateMsg('âœ… æŠµé”/å¹³å®‰')">âœ… æŠµé” / å¹³å®‰</button>
        <button class="btn-status" onclick="generateMsg('ğŸš€ å‡ºç™¼ / çºŒè¡Œ')">ğŸš€ å‡ºç™¼ / çºŒè¡Œ</button>
        <button class="btn-status" onclick="generateMsg('âš ï¸ å»¶é² / ç‹€æ³')">âš ï¸ å»¶é² / ç‹€æ³</button>
        <button class="btn-status" onclick="generateMsg('ğŸ›‘ æ’¤é€€ / ç´®ç‡Ÿ')">ğŸ›‘ æ’¤é€€ / ç´®ç‡Ÿ</button>
    </div>
    <br>
    <div class="card">
        <p>å›å ±è¨Šæ¯ (é»æ“Šè¤‡è£½)ï¼š</p>
        <textarea id="msgArea" readonly onclick="copyText()"></textarea>
        <div class="copy-hint" id="copyHint">å·²è¤‡è£½ï¼å¿«å»è²¼ä¸Šï¼</div>
    </div>
    <br>
    <script>
        let currentLat = "ç„¡è¨Šè™Ÿ";
        let currentLon = "ç„¡è¨Šè™Ÿ";
        let googleMapLink = "";

        // 1. æŠ“å– GPS
        function getGPS() {
            document.getElementById('gpsDisplay').innerText = "å®šä½ä¸­...";
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError, {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                });
            } else {
                document.getElementById('gpsDisplay').innerText = "ç€è¦½å™¨ä¸æ”¯æ´ GPS";
            }
        }

        function showPosition(position) {
            currentLat = position.coords.latitude.toFixed(5);
            currentLon = position.coords.longitude.toFixed(5);
            let accu = Math.round(position.coords.accuracy);
            
            document.getElementById('gpsDisplay').innerHTML = 
                `ç·¯åº¦: ${currentLat}<br>ç¶“åº¦: ${currentLon}<br>èª¤å·®: ${accu}å…¬å°º`;
            
            // ä¿®æ­£éçš„æ¨™æº– Google Maps é€£çµ
            googleMapLink = `https://www.google.com/maps?q=${currentLat},${currentLon}`;
        }

        function showError(error) {
            let msg = "";
            switch(error.code) {
                case error.PERMISSION_DENIED: msg = "è«‹å…è¨±å–ç”¨ä½ç½®æ¬Šé™"; break;
                case error.POSITION_UNAVAILABLE: msg = "ç„¡æ³•å–å¾—ä½ç½® (è«‹åˆ°ç©ºæ› è™•)"; break;
                case error.TIMEOUT: msg = "å®šä½é€¾æ™‚"; break;
                default: msg = "å®šä½éŒ¯èª¤";
            }
            document.getElementById('gpsDisplay').innerText = msg;
        }

        // 2. ç”Ÿæˆè¨Šæ¯
        function generateMsg(status) {
            if(currentLat === "ç„¡è¨Šè™Ÿ") {
                alert("è«‹å…ˆé»æ“Šä¸Šæ–¹è—è‰²æŒ‰éˆ•å–å¾— GPSï¼");
                return;
            }
            
            let now = new Date();
            let timeStr = (now.getMonth()+1) + "/" + now.getDate() + " " + 
                          String(now.getHours()).padStart(2, '0') + ":" + 
                          String(now.getMinutes()).padStart(2, '0');

            let finalMsg = `ã€${status}ã€‘\næ™‚é–“ï¼š${timeStr}\nä½ç½®ï¼š${currentLat}, ${currentLon}\nåœ°åœ–ï¼š${googleMapLink}`;
            
            document.getElementById('msgArea').value = finalMsg;
            copyText(); 
        }

        function copyText() {
            let copyText = document.getElementById("msgArea");
            copyText.select();
            copyText.setSelectionRange(0, 99999);
            
            try {
                navigator.clipboard.writeText(copyText.value).then(() => {
                    showHint();
                });
            } catch (err) {
                document.execCommand("copy");
                showHint();
            }
        }

        function showHint() {
            let hint = document.getElementById("copyHint");
            hint.style.display = "block";
            setTimeout(() => { hint.style.display = "none"; }, 2000);
        }
    </script>
</body>
</html>